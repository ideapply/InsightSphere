- JPEG是一种目前广泛使用的图片有损压缩技术，在保证视觉效果差别不大的情况下，压缩比达到十倍以上。原理上是去除图片中不重要的信息，减少文件体积。
- ## 图像分割
- 根据人眼对亮度和颜色敏感程度的不同，首先将RGB图像转换为YUV（亮度-色差）图像。YUV图像中亮度channel被单独剥离处理，从而实现对亮度和色差的分别压缩处理。如图为一副彩色图像的YUV分量。
- ![](https://wxjwjj.github.io/img/YUV.png)
- ## DCT离散余弦变换
- 将图像分割成$$8 \times 8$$的小块，以方便DCT变换的单独处理。
- DCT可以将图像以频域的形式进行表达，经过DCT变换，图像左上角会集中低频部分的能量，右下角集中高频，数值越大，代表此处的能量越多。下图是某前辈对Lena图的第一个$$8 \times 8$$小块进行DCT变换的结果。
- ![](https://wxjwjj.github.io/img/dct1.png)
- ## 量化
- 到目前为止依然是无损的，由于人眼对高频不敏感的特性，我们试图过滤这些右下角的高频分量，此时就要用到**量化**。说白了就是分别scale，把左上角的除一个较小值，右下角的除一个较大值，接着对结果进行取整，这样就会导致右下脚大部分变为0，非常有利于后面的压缩。
- ![](https://wxjwjj.github.io/img/dct2.png)
- 但量化时候并不是随便scale，经过长期的经验，人们得到了上面两张量化表，对应位置相除即可（在量化表上乘一个系数，可以得到不同的压缩比）。量化后的结果如下，右下角已大部分为0。
- ![](https://wxjwjj.github.io/img/dct3.png)
- 接着将上述矩阵按Z形编码，得到一个一维数组：
- Eg:`35,7,0,0,0,-6,-2,0,0,-9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,0,0,0,…,0`，目的是尽可能使0分布在一起。接着主要对非0部分进行编码：采用JPEG提供的标准码表，及霍夫曼编码（无损），得到最终的压缩数据。
- 
- ### Reference
- [JPEG格式图像编解码](http://www.dwenzhao.cn/profession/imgia/jpegcode.html)
- [JPEG图片压缩的Python实现](https://blog.csdn.net/u014134327/article/details/102807264)
    - [GitHub - Azuki-Azusa/JPEG: Translate pic to JPEG](https://github.com/Azuki-Azusa/JPEG)
    - [JPEG算法解密（一） – TheCodeWay:我的博客](https://www.thecodeway.com/?p=69)
- [How are Images Compressed?  [46MB ↘↘ 4.07MB] JPEG In Depth - YouTube](https://www.youtube.com/watch?v=Kv1Hiv3ox8I)
